from typing import Optional


def generate_ai_description(product, question: Optional[str] = None) -> str:
    """
    –ü—Ä–æ—Å—Ç–∏–π "AI-–ø–æ–º—ñ—á–Ω–∏–∫", —è–∫–∏–π –±—É–¥—É—î –ø–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–ª—ñ–≤ —Ç–æ–≤–∞—Ä—É.
    –¢—É—Ç –Ω–µ–º–∞—î —Å–ø—Ä–∞–≤–∂–Ω—å–æ–≥–æ –®–Ü, –∞–ª–µ –≤–∏–≥–ª—è–¥–∞—î —è–∫ —Ä–æ–∑—É–º–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å :)
    """

    lines: list[str] = []

    # –ë–∞–∑–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
    lines.append(f"üõçÔ∏è –¢–æ–≤–∞—Ä: {product.title}")

    # –û–ø–∏—Å —Ç–æ–≤–∞—Ä—É
    description = getattr(product, "description", "") or ""
    if description:
        lines.append("")
        lines.append(f"üìÑ –û–ø–∏—Å: {description}")

    # –ö–∞—Ç–µ–≥–æ—Ä—ñ—è (—è–∫—â–æ —î —Ç–∞–∫–µ –ø–æ–ª–µ)
    category = getattr(product, "category", None)
    if category:
        # category –º–æ–∂–µ –±—É—Ç–∏ –æ–±'—î–∫—Ç–æ–º –∞–±–æ —Ä—è–¥–∫–æ–º
        category_name = getattr(category, "name", None) or str(category)
        lines.append(f"üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä—ñ—è: {category_name}")

    # –¶—ñ–Ω–∞
    price = getattr(product, "price", None)
    if price is not None:
        lines.append(f"üí∞ –¶—ñ–Ω–∞: {price} –≥—Ä–Ω")

    # –¢—Ä–æ—Ö–∏ "—Ä–æ–∑—É–º–Ω–∏—Ö" –ø—Ä–∏–ø—É—â–µ–Ω—å –ø–æ –∫–ª—é—á–æ–≤–∏—Ö —Å–ª–æ–≤–∞—Ö
    text_all = (description + " " + product.title).lower()

    if any(word in text_all for word in ["–≤—ñ—Ç–∞–º—ñ–Ω", "vitamin", "–±—ñ–æ–¥–æ–±–∞–≤"]):
        lines.append("")
        lines.append(
            "‚öïÔ∏è –¶–µ –≤–∏–≥–ª—è–¥–∞—î —è–∫ —Ç–æ–≤–∞—Ä –¥–ª—è –∑–¥–æ—Ä–æ–≤ º—è –∞–±–æ –¥–æ–±–∞–≤–∫–∞. "
            "–ó–∞–∑–≤–∏—á–∞–π —Ç–∞–∫—ñ –∑–∞—Å–æ–±–∏ –≤–∞—Ä—Ç–æ –ø—Ä–∏–π–º–∞—Ç–∏ –∑–≥—ñ–¥–Ω–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó "
            "—Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –ª—ñ–∫–∞—Ä—è."
        )

    if any(word in text_all for word in ["—à–∞–º–ø—É–Ω—å", "hair", "–≤–æ–ª–æ—Å—Å—è"]):
        lines.append("")
        lines.append(
            "üíá‚Äç‚ôÄÔ∏è –¶–µ –∑–∞—Å—ñ–± –¥–ª—è –¥–æ–≥–ª—è–¥—É –∑–∞ –≤–æ–ª–æ—Å—Å—è–º. "
            "–ó–≤–µ—Ä–Ω–∏ —É–≤–∞–≥—É, –¥–ª—è —è–∫–æ–≥–æ —Ç–∏–ø—É –≤–æ–ª–æ—Å—Å—è –≤—ñ–Ω –ø—ñ–¥—Ö–æ–¥–∏—Ç—å "
            "(—Å—É—Ö–µ, –∂–∏—Ä–Ω–µ, —Ñ–∞—Ä–±–æ–≤–∞–Ω–µ —Ç–æ—â–æ)."
        )

    if any(word in text_all for word in ["–∫—Ä–µ–º", "skin", "—à–∫—ñ—Ä–∏", "spf"]):
        lines.append("")
        lines.append(
            "üß¥ –ô–º–æ–≤—ñ—Ä–Ω–æ, —Ü–µ –∑–∞—Å—ñ–± –¥–ª—è –¥–æ–≥–ª—è–¥—É –∑–∞ —à–∫—ñ—Ä–æ—é. "
            "–ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –≤—ñ–Ω –¥–ª—è —Ç–≤–æ–≥–æ —Ç–∏–ø—É —à–∫—ñ—Ä–∏ "
            "—Ç–∞ —á–∏ —î –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Å–æ–Ω—Ü—è (SPF), —è–∫—â–æ —Ü–µ –≤–∞–∂–ª–∏–≤–æ."
        )

    # –í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    if question:
        lines.append("")
        lines.append("‚ùì –¢–∏ –∑–∞–ø–∏—Ç–∞–≤(–ª–∞):")
        lines.append(question)
        lines.append("")
        lines.append(
            "üí° –í—ñ–¥–ø–æ–≤—ñ–¥—å —Å—Ñ–æ—Ä–º–æ–≤–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Ç–æ–≤–∞—Ä "
            "—É –º–∞–≥–∞–∑–∏–Ω—ñ. –Ø–∫—â–æ —Ç–æ–±—ñ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –º–µ–¥–∏—á–Ω–∞ –∞–±–æ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è, "
            "–∫—Ä–∞—â–µ –∑–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞."
        )
    else:
        lines.append("")
        lines.append(
            "üí° –ú–æ–∂–µ—à –∑–∞–¥–∞—Ç–∏ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ —Ü–µ–π —Ç–æ–≤–∞—Ä (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: "
            "¬´–ü–æ—è—Å–Ω–∏, —â–æ –≤—Ö–æ–¥–∏—Ç—å —É —Å–∫–ª–∞–¥ —ñ –∫–æ–º—É –ø—ñ–¥—ñ–π–¥–µ —Ü–µ–π –ø—Ä–æ–¥—É–∫—Ç¬ª)."
        )

    return "\n".join(lines)